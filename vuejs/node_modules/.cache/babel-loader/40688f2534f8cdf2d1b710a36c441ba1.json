{"remainingRequest":"/home/ris/cours/ProjetVue/projet-vue/node_modules/babel-loader/lib/index.js!/home/ris/cours/ProjetVue/projet-vue/node_modules/eslint-loader/index.js??ref--14-0!/home/ris/cours/ProjetVue/projet-vue/src/router.js","dependencies":[{"path":"/home/ris/cours/ProjetVue/projet-vue/src/router.js","mtime":1639923486648},{"path":"/home/ris/cours/ProjetVue/projet-vue/babel.config.js","mtime":1639920791145},{"path":"/home/ris/cours/ProjetVue/projet-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ris/cours/ProjetVue/projet-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/ris/cours/ProjetVue/projet-vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCB7IGNyZWF0ZVdlYkhpc3RvcnksIGNyZWF0ZVJvdXRlciB9IGZyb20gInZ1ZS1yb3V0ZXIiOwppbXBvcnQgSG9tZSBmcm9tICIuL2NvbXBvbmVudHMvSG9tZS52dWUiOwppbXBvcnQgTG9naW4gZnJvbSAiLi9jb21wb25lbnRzL0xvZ2luLnZ1ZSI7CmltcG9ydCBSZWdpc3RlciBmcm9tICIuL2NvbXBvbmVudHMvUmVnaXN0ZXIudnVlIjsgLy8gbGF6eS1sb2FkZWQKCnZhciBQcm9maWxlID0gZnVuY3Rpb24gUHJvZmlsZSgpIHsKICByZXR1cm4gaW1wb3J0KCIuL2NvbXBvbmVudHMvUHJvZmlsZS52dWUiKTsKfTsKCnZhciBBZG1pbkJvYXJkID0gZnVuY3Rpb24gQWRtaW5Cb2FyZCgpIHsKICByZXR1cm4gaW1wb3J0KCIuL2NvbXBvbmVudHMvQWRtaW5Cb2FyZC52dWUiKTsKfTsKCnZhciBQaXp6ZXJpYUJvYXJkID0gZnVuY3Rpb24gUGl6emVyaWFCb2FyZCgpIHsKICByZXR1cm4gaW1wb3J0KCIuL2NvbXBvbmVudHMvUGl6emVyaWFCb2FyZC52dWUiKTsKfTsKCnZhciBVc2VyQm9hcmQgPSBmdW5jdGlvbiBVc2VyQm9hcmQoKSB7CiAgcmV0dXJuIGltcG9ydCgiLi9jb21wb25lbnRzL1VzZXJCb2FyZC52dWUiKTsKfTsKCnZhciByb3V0ZXMgPSBbewogIHBhdGg6ICIvIiwKICBuYW1lOiAiaG9tZSIsCiAgY29tcG9uZW50OiBIb21lCn0sIHsKICBwYXRoOiAiL2hvbWUiLAogIGNvbXBvbmVudDogSG9tZQp9LCB7CiAgcGF0aDogIi9sb2dpbiIsCiAgY29tcG9uZW50OiBMb2dpbgp9LCB7CiAgcGF0aDogIi9yZWdpc3RlciIsCiAgY29tcG9uZW50OiBSZWdpc3Rlcgp9LCB7CiAgcGF0aDogIi9wcm9maWxlIiwKICBuYW1lOiAicHJvZmlsZSIsCiAgLy8gbGF6eS1sb2FkZWQKICBjb21wb25lbnQ6IFByb2ZpbGUKfSwgewogIHBhdGg6ICIvYWRtaW4iLAogIG5hbWU6ICJhZG1pbiIsCiAgLy8gbGF6eS1sb2FkZWQKICBjb21wb25lbnQ6IEFkbWluQm9hcmQKfSwgewogIHBhdGg6ICIvbW9kIiwKICBuYW1lOiAicGl6emVyaWEiLAogIC8vIGxhenktbG9hZGVkCiAgY29tcG9uZW50OiBQaXp6ZXJpYUJvYXJkCn0sIHsKICBwYXRoOiAiL3VzZXIiLAogIG5hbWU6ICJ1c2VyIiwKICAvLyBsYXp5LWxvYWRlZAogIGNvbXBvbmVudDogVXNlckJvYXJkCn1dOwp2YXIgcm91dGVyID0gY3JlYXRlUm91dGVyKHsKICBoaXN0b3J5OiBjcmVhdGVXZWJIaXN0b3J5KCksCiAgcm91dGVzOiByb3V0ZXMKfSk7CnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogIHZhciBwdWJsaWNQYWdlcyA9IFsnLycsICcvbG9naW4nLCAnL3JlZ2lzdGVyJywgJy9ob21lJ107CiAgdmFyIGF1dGhSZXF1aXJlZCA9ICFwdWJsaWNQYWdlcy5pbmNsdWRlcyh0by5wYXRoKTsKICB2YXIgbG9nZ2VkSW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpOyAvLyB0cnlpbmcgdG8gYWNjZXNzIGEgcmVzdHJpY3RlZCBwYWdlICsgbm90IGxvZ2dlZCBpbgogIC8vIHJlZGlyZWN0IHRvIGxvZ2luIHBhZ2UKCiAgaWYgKGF1dGhSZXF1aXJlZCAmJiAhbG9nZ2VkSW4pIHsKICAgIG5leHQoJy9sb2dpbicpOwogIH0gZWxzZSB7CiAgICBuZXh0KCk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["/home/ris/cours/ProjetVue/projet-vue/src/router.js"],"names":["createWebHistory","createRouter","Home","Login","Register","Profile","AdminBoard","PizzeriaBoard","UserBoard","routes","path","name","component","router","history","beforeEach","to","from","next","publicPages","authRequired","includes","loggedIn","localStorage","getItem"],"mappings":";;;;AAAA,SAASA,gBAAT,EAA2BC,YAA3B,QAA+C,YAA/C;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,OAAOC,QAAP,MAAqB,2BAArB,C,CACA;;AACA,IAAMC,OAAO,GAAG,SAAVA,OAAU;AAAA,SAAM,OAAO,0BAAP,CAAN;AAAA,CAAhB;;AACA,IAAMC,UAAU,GAAG,SAAbA,UAAa;AAAA,SAAM,OAAO,6BAAP,CAAN;AAAA,CAAnB;;AACA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB;AAAA,SAAM,OAAO,gCAAP,CAAN;AAAA,CAAtB;;AACA,IAAMC,SAAS,GAAG,SAAZA,SAAY;AAAA,SAAM,OAAO,4BAAP,CAAN;AAAA,CAAlB;;AAEA,IAAMC,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,GADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,SAAS,EAAEV;AAHb,CADa,EAMb;AACEQ,EAAAA,IAAI,EAAE,OADR;AAEEE,EAAAA,SAAS,EAAEV;AAFb,CANa,EAUb;AACEQ,EAAAA,IAAI,EAAE,QADR;AAEEE,EAAAA,SAAS,EAAET;AAFb,CAVa,EAcb;AACEO,EAAAA,IAAI,EAAE,WADR;AAEEE,EAAAA,SAAS,EAAER;AAFb,CAda,EAkBb;AACEM,EAAAA,IAAI,EAAE,UADR;AAEEC,EAAAA,IAAI,EAAE,SAFR;AAGE;AACAC,EAAAA,SAAS,EAAEP;AAJb,CAlBa,EAwBb;AACEK,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,IAAI,EAAE,OAFR;AAGE;AACAC,EAAAA,SAAS,EAAEN;AAJb,CAxBa,EA8Bb;AACEI,EAAAA,IAAI,EAAE,MADR;AAEEC,EAAAA,IAAI,EAAE,UAFR;AAGE;AACAC,EAAAA,SAAS,EAAEL;AAJb,CA9Ba,EAoCb;AACEG,EAAAA,IAAI,EAAE,OADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGE;AACAC,EAAAA,SAAS,EAAEJ;AAJb,CApCa,CAAf;AA4CA,IAAMK,MAAM,GAAGZ,YAAY,CAAC;AAC1Ba,EAAAA,OAAO,EAAEd,gBAAgB,EADC;AAE1BS,EAAAA,MAAM,EAANA;AAF0B,CAAD,CAA3B;AAMAI,MAAM,CAACE,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClC,MAAMC,WAAW,GAAG,CAAC,GAAD,EAAK,QAAL,EAAe,WAAf,EAA4B,OAA5B,CAApB;AACA,MAAMC,YAAY,GAAG,CAACD,WAAW,CAACE,QAAZ,CAAqBL,EAAE,CAACN,IAAxB,CAAtB;AACA,MAAMY,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAjB,CAHkC,CAKlC;AACA;;AACA,MAAIJ,YAAY,IAAI,CAACE,QAArB,EAA+B;AAC7BJ,IAAAA,IAAI,CAAC,QAAD,CAAJ;AACD,GAFD,MAEO;AACLA,IAAAA,IAAI;AACL;AACF,CAZH;AAcA,eAAeL,MAAf","sourcesContent":["import { createWebHistory, createRouter } from \"vue-router\";\nimport Home from \"./components/Home.vue\";\nimport Login from \"./components/Login.vue\";\nimport Register from \"./components/Register.vue\";\n// lazy-loaded\nconst Profile = () => import(\"./components/Profile.vue\")\nconst AdminBoard = () => import(\"./components/AdminBoard.vue\")\nconst PizzeriaBoard = () => import(\"./components/PizzeriaBoard.vue\")\nconst UserBoard = () => import(\"./components/UserBoard.vue\")\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"home\",\n    component: Home,\n  },\n  {\n    path: \"/home\",\n    component: Home,\n  },\n  {\n    path: \"/login\",\n    component: Login,\n  },\n  {\n    path: \"/register\",\n    component: Register,\n  },\n  {\n    path: \"/profile\",\n    name: \"profile\",\n    // lazy-loaded\n    component: Profile,\n  },\n  {\n    path: \"/admin\",\n    name: \"admin\",\n    // lazy-loaded\n    component: AdminBoard,\n  },\n  {\n    path: \"/mod\",\n    name: \"pizzeria\",\n    // lazy-loaded\n    component: PizzeriaBoard,\n  },\n  {\n    path: \"/user\",\n    name: \"user\",\n    // lazy-loaded\n    component: UserBoard,\n  },\n];\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes,\n});\n\n\nrouter.beforeEach((to, from, next) => {\n    const publicPages = ['/','/login', '/register', '/home'];\n    const authRequired = !publicPages.includes(to.path);\n    const loggedIn = localStorage.getItem('user');\n  \n    // trying to access a restricted page + not logged in\n    // redirect to login page\n    if (authRequired && !loggedIn) {\n      next('/login');\n    } else {\n      next();\n    }\n  });\n\nexport default router;"]}]}