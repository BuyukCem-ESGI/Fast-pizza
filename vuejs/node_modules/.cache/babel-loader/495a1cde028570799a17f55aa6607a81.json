{"remainingRequest":"/Users/buyukcem/Documents/Project/ESGI/Fast-pizza/vuejs/node_modules/babel-loader/lib/index.js!/Users/buyukcem/Documents/Project/ESGI/Fast-pizza/vuejs/node_modules/eslint-loader/index.js??ref--14-0!/Users/buyukcem/Documents/Project/ESGI/Fast-pizza/vuejs/src/store/cart.module.js","dependencies":[{"path":"/Users/buyukcem/Documents/Project/ESGI/Fast-pizza/vuejs/src/store/cart.module.js","mtime":1643569679911},{"path":"/Users/buyukcem/Documents/Project/ESGI/Fast-pizza/vuejs/babel.config.js","mtime":1642281992204},{"path":"/Users/buyukcem/Documents/Project/ESGI/Fast-pizza/vuejs/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/buyukcem/Documents/Project/ESGI/Fast-pizza/vuejs/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/buyukcem/Documents/Project/ESGI/Fast-pizza/vuejs/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCBjYXJ0U2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy9jYXJ0LnNlcnZpY2UuanMnOwp2YXIgdXNlciA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSk7CnZhciBpbml0aWFsU3RhdGUgPSB1c2VyID8gewogIHN0YXR1czogewogICAgbG9nZ2VkSW46IHRydWUKICB9LAogIHVzZXI6IHVzZXIKfSA6IHsKICBzdGF0dXM6IHsKICAgIGxvZ2dlZEluOiBmYWxzZQogIH0sCiAgdXNlcjogbnVsbAp9Owp2YXIgY2FydFN0YXRlID0gW107CmV4cG9ydCB2YXIgY2FydCA9IHsKICBjYXJ0U3RhdGU6IGNhcnRTdGF0ZSwKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBpbml0aWFsU3RhdGUsCiAgYWN0aW9uczogewogICAgZ2V0Q2FydDogZnVuY3Rpb24gZ2V0Q2FydChfcmVmLCBjYXJ0SWQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgY2FydFNlcnZpY2UuZ2V0Q2FydChjYXJ0SWQpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBjb21taXQoJ2dldENhcnQnLCBkYXRhKTsKICAgICAgICBfdGhpcy5jYXJ0U3RhdGUgPSBkYXRhOwogICAgICAgIGNvbnNvbGUubG9nKF90aGlzLmNhcnRTdGF0ZSk7CiAgICAgICAgcmV0dXJuIF90aGlzLmNhcnRTdGF0ZTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkVG9DYXJ0OiBmdW5jdGlvbiBhZGRUb0NhcnQoX3JlZjIsIHByb2R1Y3QpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgY29uc29sZS5sb2coIkhlbGxvIik7CiAgICAgIGNvbnNvbGUubG9nKHByb2R1Y3QuaWQpOwogICAgICBjb25zb2xlLmxvZyhwcm9kdWN0LnF1YW50aXR5KTsgLy9sZXQgZGF0YSA9IF8uZmluZCh0aGlzLmNhcnRTdGF0ZSwgWydfaWQnLCBwcm9kdWN0LmlkXSkKCiAgICAgIGlmICghZGF0YSkgewogICAgICAgIHRoaXMuY2FydC5wdXNoKHsKICAgICAgICAgIGRldGFpbHM6IHByb2R1Y3QsCiAgICAgICAgICBxdWFudGl0eTogMQogICAgICAgIH0pOwogICAgICAgIGNhcnRTZXJ2aWNlLnNlbmRFbGVtZW50SW5DYXJ0KHsKICAgICAgICAgIGRldGFpbHM6IHByb2R1Y3QsCiAgICAgICAgICBxdWFudGl0eTogMQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCdhZGRlZCB0byBjYXJ0Jyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGF0YS5xdWFudGl0eSArPSAxOwogICAgICAgIGNhcnRTZXJ2aWNlLnVwZGF0ZUVsZW1lbnRJbkNhcnQoewogICAgICAgICAgZGV0YWlsczogcHJvZHVjdCwKICAgICAgICAgIHF1YW50aXR5OiAxCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coJ3VwZGF0ZWQgY2FydCcpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBjb21taXQoJ2FkZFRvQ2FydCcsIHByb2R1Y3QpOwogICAgfSwKICAgIHJlbW92ZUZyb21DYXJ0OiBmdW5jdGlvbiByZW1vdmVGcm9tQ2FydChza3UpIHsKICAgICAgdmFyIGxvY2F0aW9uSW5DYXJ0ID0gdGhpcy5jYXJ0LmZpbmRJbmRleChmdW5jdGlvbiAocCkgewogICAgICAgIHJldHVybiBwLmRldGFpbHMuc2t1ID09PSBza3U7CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuY2FydFtsb2NhdGlvbkluQ2FydF0ucXVhbnRpdHkgPD0gMSkgewogICAgICAgIHRoaXMuY2FydC5zcGxpY2UobG9jYXRpb25JbkNhcnQsIDEpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2FydFtsb2NhdGlvbkluQ2FydF0ucXVhbnRpdHktLTsKICAgICAgfQoKICAgICAgY2FydFNlcnZpY2UuZGVsZXRlRWxlbWVudEluQ2FydChsb2NhdGlvbkluQ2FydCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZWQgZnJvbSBjYXJ0Jyk7CiAgICAgIH0pOwogICAgfSwKICAgIHNldFF1YW50aXR5RWxlbWVudDogZnVuY3Rpb24gc2V0UXVhbnRpdHlFbGVtZW50KHNrdSkgewogICAgICB2YXIgbG9jYXRpb25JbkNhcnQgPSB0aGlzLmNhcnQuZmluZEluZGV4KGZ1bmN0aW9uIChwKSB7CiAgICAgICAgcmV0dXJuIHAuZGV0YWlscy5za3UgPT09IHNrdTsKICAgICAgfSk7CgogICAgICBpZiAobG9jYXRpb25JbkNhcnQpIHsKICAgICAgICB0aGlzLmNhcnRbbG9jYXRpb25JbkNhcnRdLnF1YW50aXR5Kys7CiAgICAgICAgY2FydFNlcnZpY2UudXBkYXRlRWxlbWVudEluQ2FydCh0aGlzLmNhcnRbbG9jYXRpb25JbkNhcnRdKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCd1cGRhdGVkJyk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgZ2V0Q2FydDogZnVuY3Rpb24gZ2V0Q2FydChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuY2FydFN0YXRlOwogICAgfSwKICAgIGFkZFRvQ2FydDogZnVuY3Rpb24gYWRkVG9DYXJ0KHN0YXRlLCBwcm9kdWN0KSB7CiAgICAgIHN0YXRlLmNhcnRTdGF0ZS5wcm9kdWN0ID0gcHJvZHVjdDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/buyukcem/Documents/Project/ESGI/Fast-pizza/vuejs/src/store/cart.module.js"],"names":["cartService","user","JSON","parse","localStorage","getItem","initialState","status","loggedIn","cartState","cart","namespaced","state","actions","getCart","cartId","commit","then","data","console","log","addToCart","product","id","quantity","push","details","sendElementInCart","updateElementInCart","removeFromCart","sku","locationInCart","findIndex","p","splice","deleteElementInCart","setQuantityElement","mutations"],"mappings":"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","sourcesContent":["import cartService from '../services/cart.service.js'\n\nconst user = JSON.parse(localStorage.getItem('user'));\nconst initialState = user\n    ? {status: {loggedIn: true}, user}\n    : {status: {loggedIn: false}, user: null};\n\nconst cartState = []\nexport const cart = {\n    cartState: cartState,\n    namespaced: true,\n    state: initialState,\n    actions: {\n        getCart({commit}, cartId) {\n            cartService.getCart(cartId).then(data => {\n                commit('getCart', data);\n                this.cartState = data;\n                console.log(this.cartState);\n                return this.cartState\n            });\n        },\n\n        addToCart({commit}, product) {\n            console.log(\"Hello\")\n            console.log(product.id);\n            console.log(product.quantity);\n\n            //let data = _.find(this.cartState, ['_id', product.id])\n            if(!data){\n                this.cart.push({\n                    details: product,\n                    quantity: 1\n                })\n                cartService.sendElementInCart({\n                    details: product,\n                    quantity: 1\n                }).then(() => {\n                    return console.log('added to cart')\n                })\n\n            }else{\n                data.quantity += 1\n                cartService.updateElementInCart({\n                    details: product,\n                    quantity: 1\n                }).then(() => {\n                    return console.log('updated cart')\n                })\n            }\n            commit('addToCart', product);\n        },\n\n        removeFromCart(sku) {\n            const locationInCart = this.cart.findIndex(p => {\n                return p.details.sku === sku\n            })\n            if (this.cart[locationInCart].quantity <= 1) {\n                this.cart.splice(locationInCart, 1)\n            } else {\n                this.cart[locationInCart].quantity--\n            }\n            cartService.deleteElementInCart(locationInCart).then(() => {\n                console.log('deleted from cart')\n            })\n        },\n\n        setQuantityElement(sku) {\n            const locationInCart = this.cart.findIndex(p => {\n                return p.details.sku === sku\n            })\n            if (locationInCart) {\n                this.cart[locationInCart].quantity++\n                cartService.updateElementInCart(this.cart[locationInCart]).then(() => {\n                    console.log('updated')\n                })\n            }\n        },\n\n    },\n    mutations: {\n        getCart(state) {\n           return state.cartState\n        },\n        addToCart(state,product) {\n            state.cartState.product = product;\n        },\n    }\n};\n"]}]}