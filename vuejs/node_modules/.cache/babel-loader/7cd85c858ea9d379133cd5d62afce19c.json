{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/node_modules/eslint-loader/index.js??ref--14-0!/app/src/services/auth.service.js","dependencies":[{"path":"/app/src/services/auth.service.js","mtime":1643483469606},{"path":"/app/babel.config.js","mtime":1642281992204},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/app/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwp2YXIgQVBJX1VSTCA9ICdodHRwOi8vbG9jYWxob3N0OjgwJzsKaW1wb3J0IHsgQXBpRXJyb3JzLCBhcGlGZXRjaCB9IGZyb20gIi4uL3V0aWxzL2NhbGxBcGkiOwoKdmFyIEF1dGhTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBBdXRoU2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRoU2VydmljZSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQXV0aFNlcnZpY2UsIFt7CiAgICBrZXk6ICJsb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9naW4odXNlcikgewogICAgICBjb25zb2xlLmxvZygic2lnbmluICIsIHVzZXIpOwogICAgICByZXR1cm4gYXhpb3MucG9zdChBUElfVVJMICsgJ3NpZ25pbicsIHsKICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSwKICAgICAgICBwYXNzd29yZDogdXNlci5wYXNzd29yZAogICAgICB9LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbic6ICcqJywKICAgICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2coInJlc3BvbnNlICIsIHJlc3BvbnNlKTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuYWNjZXNzVG9rZW4pIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YSkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciAiLCBlcnJvcik7CiAgICAgICAgcmV0dXJuIGVycm9yLnJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImxvZ291dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlZ2lzdGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVnaXN0ZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodXNlcikgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJyZWdpc3RlciArKyIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlcik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnL2F1dGgvcmVnaXN0ZXInKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaUZldGNoKCcvYXV0aC9yZWdpc3RlcicsIHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVzZXIpCiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygicmVzcG9uc2UgIiwgcmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3IgIiwgZXJyb3IpOwogICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IucmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gcmVnaXN0ZXIoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZ2lzdGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZWdpc3RlcjsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIEF1dGhTZXJ2aWNlOwp9KCk7CgpleHBvcnQgZGVmYXVsdCBuZXcgQXV0aFNlcnZpY2UoKTs="},{"version":3,"sources":["/app/src/services/auth.service.js"],"names":["axios","API_URL","ApiErrors","apiFetch","AuthService","user","console","log","post","username","password","headers","then","response","data","accessToken","localStorage","setItem","JSON","stringify","catch","error","removeItem","method","body"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAMC,OAAO,GAAG,qBAAhB;AACA,SAAQC,SAAR,EAAmBC,QAAnB,QAAkC,kBAAlC;;IAEMC,W;;;;;;;WACF,eAAMC,IAAN,EAAY;AACRC,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBF,IAAvB;AACA,aAAOL,KAAK,CACPQ,IADE,CACGP,OAAO,GAAG,QADb,EACuB;AACtBQ,QAAAA,QAAQ,EAAEJ,IAAI,CAACI,QADO;AAEtBC,QAAAA,QAAQ,EAAEL,IAAI,CAACK;AAFO,OADvB,EAIA;AACCC,QAAAA,OAAO,EAAE;AACL,yCAA+B,GAD1B;AAEL,0BAAgB;AAFX;AADV,OAJA,EAUFC,IAVE,CAUG,UAAAC,QAAQ,EAAI;AACdP,QAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBM,QAAzB;;AACA,YAAIA,QAAQ,CAACC,IAAT,CAAcC,WAAlB,EAA+B;AAC3BC,UAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeN,QAAQ,CAACC,IAAxB,CAA7B;AACH;;AAED,eAAOD,QAAQ,CAACC,IAAhB;AACH,OAjBE,EAiBAM,KAjBA,CAiBM,UAAAC,KAAK,EAAI;AACdf,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBc,KAAtB;AACA,eAAOA,KAAK,CAACR,QAAN,CAAeC,IAAtB;AACH,OApBE,CAAP;AAqBH;;;WAED,kBAAS;AACLE,MAAAA,YAAY,CAACM,UAAb,CAAwB,MAAxB;AACH;;;;8EAED,iBAAejB,IAAf;AAAA;AAAA;AAAA;AAAA;AACIC,gBAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACAC,gBAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AAHJ;AAAA,uBAKUJ,QAAQ,CAAC,gBAAD,EAAmB;AAC7BoB,kBAAAA,MAAM,EAAE,MADqB;AAE7BC,kBAAAA,IAAI,EAAEN,IAAI,CAACC,SAAL,CAAed,IAAf;AAFuB,iBAAnB,CAAR,CAGHO,IAHG,CAGE,UAAAC,QAAQ,EAAI;AAChBP,kBAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBM,QAAzB;AACA,yBAAOA,QAAQ,CAACC,IAAhB;AACH,iBANK,EAMHM,KANG,CAMG,UAAAC,KAAK,EAAI;AACdf,kBAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBc,KAAtB;AACA,yBAAOA,KAAK,CAACR,QAAN,CAAeC,IAAtB;AACH,iBATK,CALV;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;;;AAkBJ,eAAe,IAAIV,WAAJ,EAAf","sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'http://localhost:80';\nimport {ApiErrors, apiFetch} from \"../utils/callApi\";\n\nclass AuthService {\n    login(user) {\n        console.log(\"signin \", user)\n        return axios\n            .post(API_URL + 'signin', {\n                username: user.username,\n                password: user.password\n            }, {\n                headers: {\n                    'Access-Control-Allow-Origin': '*',\n                    'Content-type': 'application/json'\n                }\n            })\n            .then(response => {\n                console.log(\"response \", response)\n                if (response.data.accessToken) {\n                    localStorage.setItem('user', JSON.stringify(response.data));\n                }\n\n                return response.data;\n            }).catch(error => {\n                console.log(\"error \", error)\n                return error.response.data;\n            });\n    }\n\n    logout() {\n        localStorage.removeItem('user');\n    }\n\n    async register(user) {\n        console.log(\"register ++\")\n        console.log(user)\n        console.log('/auth/register')\n\n        await apiFetch('/auth/register', {\n            method: 'POST',\n            body: JSON.stringify(user)\n        }).then(response => {\n            console.log(\"response \", response)\n            return response.data;\n        }).catch(error => {\n            console.log(\"error \", error)\n            return error.response.data;\n        });\n    }\n}\n\nexport default new AuthService();\n"]}]}